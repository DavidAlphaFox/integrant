<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>integrant.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Integrant</span> <span class="project-version">0.6.3</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 current"><a href="integrant.core.html"><div class="inner"><span>integrant.core</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="integrant.core.html#var-build"><div class="inner"><span>build</span></div></a></li><li class="depth-1"><a href="integrant.core.html#var-composite-keyword"><div class="inner"><span>composite-keyword</span></div></a></li><li class="depth-1"><a href="integrant.core.html#var-dependency-graph"><div class="inner"><span>dependency-graph</span></div></a></li><li class="depth-1"><a href="integrant.core.html#var-derived-from.3F"><div class="inner"><span>derived-from?</span></div></a></li><li class="depth-1"><a href="integrant.core.html#var-expand"><div class="inner"><span>expand</span></div></a></li><li class="depth-1"><a href="integrant.core.html#var-find-derived"><div class="inner"><span>find-derived</span></div></a></li><li class="depth-1"><a href="integrant.core.html#var-find-derived-1"><div class="inner"><span>find-derived-1</span></div></a></li><li class="depth-1"><a href="integrant.core.html#var-halt.21"><div class="inner"><span>halt!</span></div></a></li><li class="depth-1"><a href="integrant.core.html#var-halt-key.21"><div class="inner"><span>halt-key!</span></div></a></li><li class="depth-1"><a href="integrant.core.html#var-init"><div class="inner"><span>init</span></div></a></li><li class="depth-1"><a href="integrant.core.html#var-init-key"><div class="inner"><span>init-key</span></div></a></li><li class="depth-1"><a href="integrant.core.html#var-load-namespaces"><div class="inner"><span>load-namespaces</span></div></a></li><li class="depth-1"><a href="integrant.core.html#var-pre-init-spec"><div class="inner"><span>pre-init-spec</span></div></a></li><li class="depth-1"><a href="integrant.core.html#var-read-string"><div class="inner"><span>read-string</span></div></a></li><li class="depth-1"><a href="integrant.core.html#var-ref"><div class="inner"><span>ref</span></div></a></li><li class="depth-1"><a href="integrant.core.html#var-ref.3F"><div class="inner"><span>ref?</span></div></a></li><li class="depth-1"><a href="integrant.core.html#var-resume"><div class="inner"><span>resume</span></div></a></li><li class="depth-1"><a href="integrant.core.html#var-resume-key"><div class="inner"><span>resume-key</span></div></a></li><li class="depth-1"><a href="integrant.core.html#var-reverse-run.21"><div class="inner"><span>reverse-run!</span></div></a></li><li class="depth-1"><a href="integrant.core.html#var-run.21"><div class="inner"><span>run!</span></div></a></li><li class="depth-1"><a href="integrant.core.html#var-suspend.21"><div class="inner"><span>suspend!</span></div></a></li><li class="depth-1"><a href="integrant.core.html#var-suspend-key.21"><div class="inner"><span>suspend-key!</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">integrant.core</h1><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-build"><h3>build</h3><div class="usage"><code>(build config keys f)</code><code>(build config keys f assertf)</code></div><div class="doc"><div class="markdown"><p>Apply a function f to each key value pair in a configuration map. Keys are traversed in dependency order, and any references in the value expanded. The function should take two arguments, a key and value, and return a new value. An optional fourth argument, assertf, may be supplied to provide an assertion check on the system, key and expanded value.</p></div></div><div class="src-link"><a href="http://github.com/weavejester/integrant/blob/0.6.3/src/integrant/core.cljc#L228">view source</a></div></div><div class="public anchor" id="var-composite-keyword"><h3>composite-keyword</h3><div class="usage"><code>(composite-keyword kws)</code></div><div class="doc"><div class="markdown"><p>Return a unique keyword that is derived from an ordered collection of keywords. The function will return the same keyword for the same collection.</p></div></div><div class="src-link"><a href="http://github.com/weavejester/integrant/blob/0.6.3/src/integrant/core.cljc#L29">view source</a></div></div><div class="public anchor" id="var-dependency-graph"><h3>dependency-graph</h3><div class="usage"><code>(dependency-graph config)</code></div><div class="doc"><div class="markdown"><p>Return a dependency graph of all the refs in a config. Resolve derived dependencies.</p></div></div><div class="src-link"><a href="http://github.com/weavejester/integrant/blob/0.6.3/src/integrant/core.cljc#L82">view source</a></div></div><div class="public anchor" id="var-derived-from.3F"><h3>derived-from?</h3><div class="usage"><code>(derived-from? key candidate)</code></div><div class="doc"><div class="markdown"><p>Return true if a key is derived from candidate keyword or vector of keywords.</p></div></div><div class="src-link"><a href="http://github.com/weavejester/integrant/blob/0.6.3/src/integrant/core.cljc#L53">view source</a></div></div><div class="public anchor" id="var-expand"><h3>expand</h3><div class="usage"><code>(expand config)</code></div><div class="doc"><div class="markdown"><p>Replace all refs with the values they correspond to.</p></div></div><div class="src-link"><a href="http://github.com/weavejester/integrant/blob/0.6.3/src/integrant/core.cljc#L248">view source</a></div></div><div class="public anchor" id="var-find-derived"><h3>find-derived</h3><div class="usage"><code>(find-derived m k)</code></div><div class="doc"><div class="markdown"><p>Return a seq of all entries in a map, m, where the key is derived from the a candidate key, k. If there are no matching keys, nil is returned. The candidate key may be a keyword, or vector of keywords.</p></div></div><div class="src-link"><a href="http://github.com/weavejester/integrant/blob/0.6.3/src/integrant/core.cljc#L62">view source</a></div></div><div class="public anchor" id="var-find-derived-1"><h3>find-derived-1</h3><div class="usage"><code>(find-derived-1 m k)</code></div><div class="doc"><div class="markdown"><p>Return the map entry in a map, m, where the key is derived from the keyword, k. If there are no matching keys, nil is returned. If there is more than one matching key, an ambiguous key exception is raised.</p></div></div><div class="src-link"><a href="http://github.com/weavejester/integrant/blob/0.6.3/src/integrant/core.cljc#L69">view source</a></div></div><div class="public anchor" id="var-halt.21"><h3>halt!</h3><div class="usage"><code>(halt! system)</code><code>(halt! system keys)</code></div><div class="doc"><div class="markdown"><p>Halt a system map by applying halt-key! in reverse dependency order.</p></div></div><div class="src-link"><a href="http://github.com/weavejester/integrant/blob/0.6.3/src/integrant/core.cljc#L323">view source</a></div></div><div class="public anchor" id="var-halt-key.21"><h3>halt-key!</h3><h4 class="type">multimethod</h4><div class="usage"><code>(halt-key! key value)</code></div><div class="doc"><div class="markdown"><p>Halt a running or suspended implementation associated with a key. This is often used for stopping processes or cleaning up resources. For example, a database connection might be closed. This multimethod must be idempotent. The return value of this multimethod is discarded.</p></div></div><div class="src-link"><a href="http://github.com/weavejester/integrant/blob/0.6.3/src/integrant/core.cljc#L259">view source</a></div></div><div class="public anchor" id="var-init"><h3>init</h3><div class="usage"><code>(init config)</code><code>(init config keys)</code></div><div class="doc"><div class="markdown"><p>Turn a config map into an system map. Keys are traversed in dependency order, initiated via the init-key multimethod, then the refs associated with the key are expanded.</p></div></div><div class="src-link"><a href="http://github.com/weavejester/integrant/blob/0.6.3/src/integrant/core.cljc#L313">view source</a></div></div><div class="public anchor" id="var-init-key"><h3>init-key</h3><h4 class="type">multimethod</h4><div class="usage"><code>(init-key key value)</code></div><div class="doc"><div class="markdown"><p>Turn a config value associated with a key into a concrete implementation. For example, a database URL might be turned into a database connection.</p></div></div><div class="src-link"><a href="http://github.com/weavejester/integrant/blob/0.6.3/src/integrant/core.cljc#L253">view source</a></div></div><div class="public anchor" id="var-load-namespaces"><h3>load-namespaces</h3><div class="usage"><code>(load-namespaces config)</code><code>(load-namespaces config keys)</code></div><div class="doc"><div class="markdown"><p>Attempt to load the namespaces referenced by the keys in a configuration. If a key is namespaced, both the namespace and the namespace concatenated with the name will be tried. For example, if a key is :foo.bar/baz, then the function will attempt to load the namespaces foo.bar and foo.bar.baz. Upon completion, a list of all loaded namespaces will be returned.</p></div></div><div class="src-link"><a href="http://github.com/weavejester/integrant/blob/0.6.3/src/integrant/core.cljc#L131">view source</a></div></div><div class="public anchor" id="var-pre-init-spec"><h3>pre-init-spec</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Return a spec for the supplied key that is used to check the associated value before the key is initiated.</p></div></div><div class="src-link"><a href="http://github.com/weavejester/integrant/blob/0.6.3/src/integrant/core.cljc#L291">view source</a></div></div><div class="public anchor" id="var-read-string"><h3>read-string</h3><div class="usage"><code>(read-string s)</code><code>(read-string opts s)</code></div><div class="doc"><div class="markdown"><p>Read a config from a string of edn. Refs may be denotied by tagging keywords with #ig/ref.</p></div></div><div class="src-link"><a href="http://github.com/weavejester/integrant/blob/0.6.3/src/integrant/core.cljc#L104">view source</a></div></div><div class="public anchor" id="var-ref"><h3>ref</h3><div class="usage"><code>(ref key)</code></div><div class="doc"><div class="markdown"><p>Create a reference to a top-level key in a config map.</p></div></div><div class="src-link"><a href="http://github.com/weavejester/integrant/blob/0.6.3/src/integrant/core.cljc#L12">view source</a></div></div><div class="public anchor" id="var-ref.3F"><h3>ref?</h3><div class="usage"><code>(ref? x)</code></div><div class="doc"><div class="markdown"><p>Return true if its argument is a ref.</p></div></div><div class="src-link"><a href="http://github.com/weavejester/integrant/blob/0.6.3/src/integrant/core.cljc#L19">view source</a></div></div><div class="public anchor" id="var-resume"><h3>resume</h3><div class="usage"><code>(resume config system)</code><code>(resume config system keys)</code></div><div class="doc"><div class="markdown"><p>Turn a config map into a system map, reusing resources from an existing system when it’s possible to do so. Keys are traversed in dependency order, resumed with the resume-key multimethod, then the refs associated with the key are expanded.</p></div></div><div class="src-link"><a href="http://github.com/weavejester/integrant/blob/0.6.3/src/integrant/core.cljc#L339">view source</a></div></div><div class="public anchor" id="var-resume-key"><h3>resume-key</h3><h4 class="type">multimethod</h4><div class="usage"><code>(resume-key key value old-value old-impl)</code></div><div class="doc"><div class="markdown"><p>Turn a config value associated with a key into a concrete implementation, but reuse resources (e.g. connections, running threads, etc) from an existing implementation. By default this multimethod calls init-key and ignores the additional argument.</p></div></div><div class="src-link"><a href="http://github.com/weavejester/integrant/blob/0.6.3/src/integrant/core.cljc#L269">view source</a></div></div><div class="public anchor" id="var-reverse-run.21"><h3>reverse-run!</h3><div class="usage"><code>(reverse-run! system keys f)</code></div><div class="doc"><div class="markdown"><p>Apply a side-effectful function f to each key value pair in a system map. Keys are traversed in reverse dependency order. The function should take two arguments, a key and value.</p></div></div><div class="src-link"><a href="http://github.com/weavejester/integrant/blob/0.6.3/src/integrant/core.cljc#L199">view source</a></div></div><div class="public anchor" id="var-run.21"><h3>run!</h3><div class="usage"><code>(run! system keys f)</code></div><div class="doc"><div class="markdown"><p>Apply a side-effectful function f to each key value pair in a system map. Keys are traversed in dependency order. The function should take two arguments, a key and value.</p></div></div><div class="src-link"><a href="http://github.com/weavejester/integrant/blob/0.6.3/src/integrant/core.cljc#L191">view source</a></div></div><div class="public anchor" id="var-suspend.21"><h3>suspend!</h3><div class="usage"><code>(suspend! system)</code><code>(suspend! system keys)</code></div><div class="doc"><div class="markdown"><p>Suspend a system map by applying suspend-key! in reverse dependency order.</p></div></div><div class="src-link"><a href="http://github.com/weavejester/integrant/blob/0.6.3/src/integrant/core.cljc#L354">view source</a></div></div><div class="public anchor" id="var-suspend-key.21"><h3>suspend-key!</h3><h4 class="type">multimethod</h4><div class="usage"><code>(suspend-key! key value)</code></div><div class="doc"><div class="markdown"><p>Suspend a running implementation associated with a key, so that it may be eventually passed to resume-key. By default this multimethod calls halt-key!, but it may be customized to do things like keep a server running, but buffer incoming requests until the server is resumed.</p></div></div><div class="src-link"><a href="http://github.com/weavejester/integrant/blob/0.6.3/src/integrant/core.cljc#L280">view source</a></div></div></div></body></html>